{"version":3,"file":"vue.js","sources":["../../src/utils/index.js","../../src/observer/array.js","../../src/observer/dep.js","../../src/observer/index.js","../../src/state.js","../../src/compiler/parser-html.js","../../src/compiler/generate.js","../../src/compiler/index.js","../../src/utils/next-tick.js","../../src/observer/scheduler.js","../../src/observer/watcher.js","../../src/utils/patch.js","../../src/lifecycle.js","../../src/utils/mergeOptions.js","../../src/init.js","../../src/vdom/create-element.js","../../src/render.js","../../src/initGlobalApi/index.js","../../src/index.js"],"sourcesContent":["/**\n *\n * @param {*} data 当前数据是不是对象\n */\nexport function isObject(data) {\n  return typeof data === \"object\" && data !== null;\n}\n\n/**\n *\n * @param {*} data\n * @param {*} key\n * @param {*} value 定义不可枚举属性\n */\nexport function def(data, key, value) {\n  Object.defineProperty(data, key, {\n    enumerable: false,\n    configurable: false,\n    value,\n  });\n}\n/**\n * \n * @param {*} vm \n * @param {*} source \n * @param {*} key \n */\nexport function proxy(vm, source, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[source][key];\n    },\n    set(newValue) {\n      vm[source][key] = newValue;\n    },\n  });\n}","let oldArrayProtoMethods = Array.prototype;\nexport let arrayMethods = Object.create(oldArrayProtoMethods);\nlet methods = [\"push\", \"pop\", \"shift\", \"unshift\", \"reverse\", \"sort\", \"splice\"];\nmethods.forEach((method) => {\n  arrayMethods[method] = function (...args) {\n    const result = oldArrayProtoMethods[method].apply(this, args);\n    // AOP 切片编程\n    const ob = this.__ob__; // 拿到当前observe实例\n    let inserted;\n    switch (method) {\n      case \"push\":\n      case \"unshift\":\n        inserted = args;\n        break;\n      case \"splice\":\n        inserted = args.slice(2);\n      default:\n        break;\n    }\n    if (inserted) ob.observeArray(inserted); // 对新增的每一项进行观测\n    return result;\n  };\n});\n","let id = 0;\nclass Dep {\n  constructor() {\n    this.id = id++;\n    this.subs = [];\n  }\n  depend() {\n    if (Dep.target) {\n      Dep.target.addDep(this); // 让watcher,去存放dep\n    }\n  }\n  notify() {\n    this.subs.forEach((watcher) => watcher.run());\n  }\n  addSub(watcher) {\n    this.subs.push(watcher);\n  }\n}\nlet stack = [];\nexport function pushTarget(watcher) {\n  console.log('pushTarget');\n  Dep.target = watcher;\n  stack.push(watcher);\n}\nexport function popTarget() {\n  console.log('popTarget');\n  stack.pop();\n  Dep.target = stack[stack.length - 1];\n}\nexport default Dep;\n","import { isObject, def } from \"../utils/index\";\nimport { arrayMethods } from \"./array\";\nimport Dep from \"./dep\";\n\nclass Observer {\n  constructor(data) {\n    // 给每一个监控过的对象都添加一个__ob__属性\n    def(data, \"__ob__\", this);\n    if (Array.isArray(data)) {\n      data.__proto__ = arrayMethods;\n      this.observeArray(data);\n    } else {\n      this.walk(data);\n    }\n  }\n  observeArray(array) {\n    array.forEach((item) => {\n      observe(item);\n    });\n  }\n  walk(data) {\n    let keys = Object.keys(data);\n    keys.forEach((key) => {\n      defineReactive(data, key, data[key]);\n    });\n  }\n}\n\nfunction defineReactive(data, key, value) {\n  observe(value);\n  let dep = new Dep();\n  Object.defineProperty(data, key, {\n    get() {\n      if(Dep.target){ // 如果取值时有watcher\n        console.log('get dep.depend');\n        dep.depend(); // 让watcher保存dep，并且让dep 保存watcher\n      }\n      return value;\n    },\n    set(newValue) {\n      console.log('set');\n      if (newValue == value) return;\n        observe(newValue);\n        value = newValue;\n        dep.notify(); // 通知渲染watcher去更新\n      },\n  });\n}\nexport function observe(data) {\n  if (isObject(data)) {\n    return new Observer(data);\n  }\n}\n","import { observe } from \"./observer/index.js\";\nimport { proxy } from \"./utils/index\";\n\nexport function initState(vm) {\n  const opts = vm.$options;\n  if (opts.data) {\n    initData(vm);\n  }\n}\nfunction initData(vm) {\n  let data = vm.$options.data;\n  data = vm._data = typeof data === \"function\" ? data.call(vm) : data;\n  for (let key in data) {\n    // 将_data上的属性全部代理给vm实例\n    proxy(vm, \"_data\", key);\n  }\n  observe(data);\n}\n","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\nconst qnameCapture = `((?:${ncname}\\:)?${ncname})`;\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则 捕获的内容是标签名\n\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的 >\nlet root;\nlet currentParent;\nlet stack = [];\nconst ELEMENT_TYPE = 1;\nconst TEXT_TYPE = 3;\n\nfunction createASTElement(tagName, attrs) {\n  return {\n    tag: tagName,\n    type: ELEMENT_TYPE,\n    children: [],\n    attrs,\n    parent: null,\n  };\n}\nfunction start(tagName, attrs) {\n  // console.log(`开始${tagName}标签，attrs是`);\n  // console.log(attrs);\n  let element = createASTElement(tagName, attrs);\n  if (!root) {\n    root = element;\n  }\n  currentParent = element;\n  stack.push(element);\n}\nfunction end(tagName) {\n  // console.log(`结束${tagName}标签`);\n  let element = stack.pop();\n  currentParent = stack[stack.length - 1];\n  if (currentParent) {\n    element.parent = currentParent;\n    currentParent.children.push(element);\n  }\n}\nfunction chars(text) {\n  // console.log(`文本是${text}`);\n  text = text.replace(/\\s/g, \"\");\n  if (text) {\n    currentParent.children.push({\n      type: TEXT_TYPE,\n      text,\n    });\n  }\n}\nexport default function parseHTML(html) {\n  while (html) {\n    let textEnd = html.indexOf(\"<\");\n    if (textEnd == 0) {\n      const startTagMatch = parseStartTag();\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs);\n        continue;\n      }\n      const endTagMatch = html.match(endTag);\n      if (endTagMatch) {\n        advance(endTagMatch[0].length);\n        end(endTagMatch[1]);\n        continue;\n      }\n    }\n    let text;\n    if (textEnd >= 0) {\n      text = html.substring(0, textEnd);\n    }\n    if (text) {\n      advance(text.length);\n      chars(text);\n    }\n  }\n  // 前进n个\n  function advance(n) {\n    html = html.substring(n);\n  }\n  function parseStartTag() {\n    const start = html.match(startTagOpen);\n    if (start) {\n      const match = {\n        tagName: start[1],\n        attrs: [],\n      };\n      // 将标签删除\n      advance(start[0].length);\n      let attr, end;\n      while (\n        !(end = html.match(startTagClose)) &&\n        (attr = html.match(attribute))\n      ) {\n        advance(attr[0].length); // 将属性删除\n        match.attrs.push({\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5],\n        });\n      }\n      if (end) {\n        // 去掉开始标签的 >\n        advance(end[0].length);\n        return match;\n      }\n    }\n  }\n  return root\n}","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; \n\nexport default function generate(el) {\n  let children = getChildren(el);\n  let code = `_c('${el.tag}',${\n    el.attrs.length ? `${genProps(el.attrs)}` : \"undefined\"\n  }${children ? `,${children}` : \"\"})`;\n  return code;\n}\nfunction getChildren(el) {\n  // 生成儿子节点\n  const children = el.children;\n  if (children) {\n    const res = `${children.map((c) => gen(c)).join(\",\")}`;\n    return res;\n  } else {\n    return false;\n  }\n}\n\nfunction genProps(attrs) {\n  // 生成属性\n  let str = \"\";\n  for (let i = 0; i < attrs.length; i++) {\n    let attr = attrs[i];\n    if (attr.name === \"style\") {\n      let obj = {};\n      attr.value.split(\";\").forEach((item) => {\n        let [key, value] = item.split(\":\");\n        obj[key] = value;\n      });\n      attr.value = obj;\n    }\n    str += `${attr.name}:${JSON.stringify(attr.value)},`;\n  }\n  return `{${str.slice(0, -1)}}`;\n}\n\nfunction gen(node) {\n  if (node.type == 1) {\n    return generate(node);\n  } else {\n    let text = node.text;\n    if (!defaultTagRE.test(text)) {\n      return `_v(${JSON.stringify(text)})`;\n    }\n    let lastIndex = (defaultTagRE.lastIndex = 0);\n    let tokens = [];\n    let match, index;\n\n    while ((match = defaultTagRE.exec(text))) {\n      index = match.index;\n      if (index > lastIndex) {\n        tokens.push(JSON.stringify(text.slice(lastIndex, index)));\n      }\n      tokens.push(`_s(${match[1].trim()})`);\n      lastIndex = index + match[0].length;\n    }\n    if (lastIndex < text.length) {\n      tokens.push(JSON.stringify(text.slice(lastIndex)));\n    }\n    return `_v(${tokens.join(\"+\")})`;\n  }\n}\n","import parseHTML from './parser-html'\nimport generate from './generate'\n\nexport function compileToFunctions(template, vm) {\n  let root = parseHTML(template);\n  let code = generate(root, vm);\n  let render = `with(this){return ${code}}`;\n  let renderFn = new Function(render);\n  return renderFn;\n}\n","let callbacks = [];\nfunction flushCallbacks() {\n    callbacks.forEach(cb => cb());\n}\nlet timerFunc;\nif (Promise) { // then方法是异步的\n    timerFunc = () => {\n        Promise.resolve().then(flushCallbacks)\n    }\n}else if (MutationObserver) { // MutationObserver 也是一个异步方法\n    let observe = new MutationObserver(flushCallbacks); // H5的api\n    let textNode = document.createTextNode(1);\n    observe.observe(textNode, {\n        characterData: true\n    });\n    timerFunc = () => {\n        textNode.textContent = 2;\n    }\n}else if (setImmediate) {\n    timerFunc = () => {\n        setImmediate(flushCallbacks)\n    }\n}else{\n    timerFunc = () => {\n        setTimeout(flushCallbacks, 0);\n    }\n}\nexport function nextTick(cb) {\n    callbacks.push(cb);\n    timerFunc();\n}","import {\n  nextTick\n} from '../utils/next-tick'\nlet has = {};\nlet queue = [];\n\nfunction flushSchedulerQueue() {\n  for (let i = 0; i < queue.length; i++) {\n      let watcher = queue[i];\n      watcher.run()\n  }\n  queue = [];\n  has = {}\n}\nlet pending = false\nexport function queueWatcher(watcher) {\n  const id = watcher.id;\n  if (has[id] == null) {\n      has[id] = true;\n      queue.push(watcher);\n      if(!pending){\n          nextTick(flushSchedulerQueue)\n          pending = true;\n      }\n  }\n}","import { pushTarget, popTarget } from './dep'\nimport { queueWatcher } from './scheduler.js'\nlet id = 0;\nclass Watcher {\n    constructor(vm, exprOrFn, cb, options) {\n        this.vm = vm;\n        this.exprOrFn = exprOrFn;\n        if (typeof exprOrFn == 'function') {\n            this.getter = exprOrFn;\n        }\n        this.cb = cb;\n        this.options = options;\n        this.id = id++;\n        this.deps = [];\n        this.depsId = new Set();\n        this.get();\n    }\n    get() {\n        pushTarget(this);\n        this.getter();\n        popTarget();\n    }\n    addDep(dep){\n        let id = dep.id;\n        if(!this.depsId.has(id)){\n            this.depsId.add(id);\n            this.deps.push(dep);\n            dep.addSub(this);\n        }\n    }\n    update(){\n        queueWatcher(this);\n    }\n    run() {\n        this.get();\n    }\n}\n\nexport default Watcher;","export function patch(oldVnode,vnode){\n  const isRealElement = oldVnode.nodeType;\n  if(isRealElement){\n      const oldElm = oldVnode;\n      const parentElm = oldElm.parentNode;\n      \n      let el = createElm(vnode);\n      parentElm.insertBefore(el,oldElm.nextSibling);\n      parentElm.removeChild(oldVnode)\n     return el;\n  } \n}\nfunction createElm(vnode){\n  let {tag,children,key,data,text} = vnode;\n  if(typeof tag === 'string'){\n      vnode.el = document.createElement(tag);\n      updateProperties(vnode);\n      children.forEach(child => { \n          return vnode.el.appendChild(createElm(child));\n      });\n  }else{\n      vnode.el = document.createTextNode(text);\n  }\n  return vnode.el\n}\nfunction updateProperties(vnode){\n  let newProps = vnode.data || {}; // 获取当前老节点中的属性 \n  let el = vnode.el; // 当前的真实节点\n  for(let key in newProps){\n      if(key === 'style'){ \n          for(let styleName in newProps.style){\n              el.style[styleName] = newProps.style[styleName]\n          }\n      }else if(key === 'class'){\n          el.className= newProps.class\n      }else{ // 给这个元素添加属性 值就是对应的值\n          el.setAttribute(key,newProps[key]);\n      }\n  }\n}","import { log } from \"debug\";\nimport Watcher from \"./observer/watcher\";\nimport { patch } from \"./utils/patch\";\n\nexport function lifecycleMixin(Vue) {\n  Vue.prototype._update = function (vnode) {\n    const vm = this;\n    vm.$el = patch(vm.$el, vnode);\n  };\n}\nexport function mountComponent(vm, el) {\n  vm.$el = el;\n  callHook(vm, 'beforeMount')\n  let updateComponent = () => {\n    console.log('updateComponent');\n    // 将虚拟节点 渲染到页面上\n    vm._update(vm._render());\n  };\n  new Watcher(vm, updateComponent, () => {}, true);\n  callHook(vm, 'mounted')\n}\nexport function callHook(vm, hook) {\n  const handlers = vm.$options[hook];\n  if (handlers) {\n      for (let i = 0; i < handlers.length; i++) {\n          handlers[i].call(vm);\n      }\n  }\n}","export const LIFECYCLE_HOOKS = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeDestroy',\n  'destroyed',\n]\nconst strats = {};\nfunction mergeHook(parentVal, childValue) {\n  if (childValue) {\n      if (parentVal) {\n          return parentVal.concat(childValue);\n      } else {\n          return [childValue]\n      }\n  } else {\n      return parentVal;\n  }\n}\nLIFECYCLE_HOOKS.forEach(hook => {\n  strats[hook] = mergeHook\n})\nexport function mergeOptions(parent, child) {\n  const options = {}\n  for (let key in parent) {\n      mergeField(key)\n  }\n  for (let key in child) {\n      if (!parent.hasOwnProperty(key)) {\n          mergeField(key);\n      }\n  }\n  function mergeField(key) {\n      if (strats[key]) {\n          options[key] = strats[key](parent[key], child[key]);\n      } else {\n          if (typeof parent[key] == 'object' && typeof child[key] == 'object') {\n              options[key] = {\n                  ...parent[key],\n                  ...child[key]\n              }  \n          }else{\n              options[key] = child[key];\n          }\n      }\n  }\n  return options\n} ","import { initState } from \"./state\";\nimport { compileToFunctions } from \"./compiler/index\";\nimport { mountComponent, callHook } from \"./lifecycle\";\nimport { mergeOptions } from \"./utils/mergeOptions\";\n\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this;\n    this.$options = mergeOptions(vm.constructor.options,options);\n\n    // 初始化状态\n    callHook(vm,'beforeCreate');\n    initState(vm);\n    callHook(vm,'created');\n    \n    // 页面挂载\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el);\n    }\n  };\n  Vue.prototype.$mount = function (el) {\n    const vm = this;\n    const options = this.$options;\n    el = document.querySelector(el);\n\n    // 如果没有render方法,将template编译成render函数\n    if (!options.render) {\n      let template = options.template;\n      if (!template && el) {\n        template = el.outerHTML;\n      }\n      const render = compileToFunctions(template);\n      options.render = render;\n    }\n    mountComponent(vm, el);\n  };\n}\n","// 创建虚拟节点\nexport function createTextNode(text) {\n  return vnode(undefined,undefined,undefined,undefined,text)\n}\nexport function createElement(tag,data={},...children){\n  let key = data.key;\n  if(key){\n      delete data.key;\n  }\n  return vnode(tag,data,key,children);\n}\nfunction vnode(tag,data,key,children,text){\n  return {\n      tag,\n      data,\n      key,\n      children,\n      text\n  }\n}","import {createTextNode,createElement} from './vdom/create-element'\nexport function renderMixin(Vue){\n    Vue.prototype._v = function (text) { // 创建文本\n        return createTextNode(text);\n    }\n    Vue.prototype._c = function () { // 创建元素\n        return createElement(...arguments);\n    }\n    Vue.prototype._s = function (val) {\n        return val == null? '' : (typeof val === 'object'?JSON.stringify(val):val);\n    }\n    Vue.prototype._render = function () {\n        const vm = this;\n        const {render} = vm.$options;\n        let vnode = render.call(vm);\n        // console.log(vnode);\n        return vnode;\n    }\n}","import { mergeOptions } from \"../utils/mergeOptions\";\nexport function initGlobalAPI(Vue) {\n  Vue.options = {};\n\n  Vue.mixin = function (mixin) {\n    // 将属性合并到Vue.options上\n    this.options = mergeOptions(this.options, mixin);\n    return this;\n  };\n}\n","import { initMixin } from \"./init.js\";\nimport { lifecycleMixin } from \"./lifecycle.js\";\nimport { renderMixin } from \"./render.js\";\nimport { initGlobalAPI } from \"./initGlobalApi/index\";\nfunction Vue(options) {\n  this._init(options);\n}\ninitMixin(Vue);\nlifecycleMixin(Vue);\nrenderMixin(Vue);\ninitGlobalAPI(Vue)\nexport default Vue;\n"],"names":["isObject","data","def","key","value","Object","defineProperty","enumerable","configurable","proxy","vm","source","get","set","newValue","oldArrayProtoMethods","Array","prototype","arrayMethods","create","methods","forEach","method","args","result","apply","ob","__ob__","inserted","slice","observeArray","id","Dep","subs","target","addDep","watcher","run","push","stack","pushTarget","console","log","popTarget","pop","length","Observer","isArray","__proto__","walk","array","item","observe","keys","defineReactive","dep","depend","notify","initState","opts","$options","initData","_data","call","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","root","currentParent","ELEMENT_TYPE","TEXT_TYPE","createASTElement","tagName","attrs","tag","type","children","parent","start","element","end","chars","text","replace","parseHTML","html","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","n","attr","name","defaultTagRE","generate","el","getChildren","code","genProps","res","map","c","gen","join","str","i","obj","split","JSON","stringify","node","test","lastIndex","tokens","index","exec","trim","compileToFunctions","template","render","renderFn","Function","callbacks","flushCallbacks","cb","timerFunc","Promise","resolve","then","MutationObserver","textNode","document","createTextNode","characterData","textContent","setImmediate","setTimeout","nextTick","has","queue","flushSchedulerQueue","pending","queueWatcher","Watcher","exprOrFn","options","getter","deps","depsId","Set","add","addSub","patch","oldVnode","vnode","isRealElement","nodeType","oldElm","parentElm","parentNode","createElm","insertBefore","nextSibling","removeChild","createElement","updateProperties","child","appendChild","newProps","styleName","style","className","setAttribute","lifecycleMixin","Vue","_update","$el","mountComponent","callHook","updateComponent","_render","hook","handlers","LIFECYCLE_HOOKS","strats","mergeHook","parentVal","childValue","concat","mergeOptions","mergeField","hasOwnProperty","initMixin","_init","constructor","$mount","querySelector","outerHTML","undefined","renderMixin","_v","_c","arguments","_s","val","initGlobalAPI","mixin"],"mappings":"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"}